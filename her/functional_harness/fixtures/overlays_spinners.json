{
  "fixture": "overlays_spinners",
  "description": "Test overlay auto-close and spinner wait functionality",
  "intents": [
    {
      "id": "main_action_with_cookie",
      "query": "click main action",
      "action": "click",
      "initial_state": "cookie_banner_visible",
      "ground_truth": {
        "used_selector": "#main-action",
        "strategy": "css",
        "unique": true,
        "frame_path": [],
        "expected_node": "button",
        "auto_closed_overlay": true,
        "overlay_selector": "#cookie-banner",
        "note": "Should auto-close cookie banner first"
      }
    },
    {
      "id": "accept_cookies",
      "query": "accept cookies",
      "action": "click",
      "ground_truth": {
        "used_selector": "#accept-cookies",
        "strategy": "css",
        "unique": true,
        "frame_path": [],
        "expected_node": "button",
        "post_action": {
          "overlay_closed": true
        }
      }
    },
    {
      "id": "close_modal",
      "query": "close modal",
      "action": "click",
      "initial_state": "modal_visible",
      "ground_truth": {
        "used_selector": "#modal-close",
        "strategy": "css",
        "unique": true,
        "frame_path": [],
        "expected_node": "span",
        "post_action": {
          "overlay_closed": true
        }
      }
    },
    {
      "id": "action_with_spinner",
      "query": "trigger loading",
      "action": "click",
      "ground_truth": {
        "used_selector": "#trigger-loading",
        "strategy": "css",
        "unique": true,
        "frame_path": [],
        "expected_node": "button",
        "waits": {
          "spinner_wait": true,
          "expected_wait_ms_min": 2000
        },
        "post_action": {
          "spinner_gone": true
        }
      }
    },
    {
      "id": "modal_ok_button",
      "query": "click ok button",
      "action": "click",
      "initial_state": "modal_visible",
      "ground_truth": {
        "used_selector": "#modal-ok",
        "strategy": "css",
        "unique": true,
        "frame_path": [],
        "expected_node": "button",
        "note": "Should find OK button in modal context"
      }
    }
  ]
}