{
  "test_name": "Cold Start Test",
  "description": "Validate cold start handling with full DOM snapshot and caching",
  "page_url": "cold_start.html",
  "test_scenarios": [
    {
      "scenario": "First Run - Cold Start",
      "steps": [
        {
          "action": "navigate",
          "url": "cold_start.html"
        },
        {
          "action": "wait_for_idle",
          "timeout": 5000
        },
        {
          "action": "verify_cold_start",
          "expectations": {
            "is_cold_start": true,
            "full_index": true,
            "cache_created": true,
            "elements_indexed": ">50"
          }
        }
      ]
    },
    {
      "scenario": "User Intents - Cold Start",
      "user_intents": [
        {
          "intent": "Search for products",
          "expected_element": "#product-search",
          "validation": {
            "unique": true,
            "visible": true,
            "type": "input"
          }
        },
        {
          "intent": "Add Wireless Headphones to cart",
          "expected_element": "[data-product-id='1'] .add-to-cart",
          "validation": {
            "unique": true,
            "visible": true,
            "clickable": true
          }
        },
        {
          "intent": "Filter by electronics category",
          "expected_element": "#category-select",
          "validation": {
            "unique": true,
            "visible": true,
            "type": "select"
          }
        },
        {
          "intent": "View Smart Watch price",
          "expected_element": "[data-product-id='2'] .product-price",
          "validation": {
            "unique": true,
            "visible": true,
            "text_contains": "$349.99"
          }
        }
      ]
    },
    {
      "scenario": "Second Run - Cache Hit",
      "steps": [
        {
          "action": "reload_page"
        },
        {
          "action": "verify_cache_hit",
          "expectations": {
            "is_cold_start": false,
            "cache_used": true,
            "incremental_update": false,
            "elements_reused": ">50"
          }
        }
      ]
    },
    {
      "scenario": "Performance Metrics",
      "metrics": {
        "cold_start_time": {
          "measure": "time_to_index",
          "expected": "<3000ms"
        },
        "cache_hit_time": {
          "measure": "time_to_load",
          "expected": "<500ms"
        },
        "embedding_time": {
          "measure": "time_to_embed_all",
          "expected": "<2000ms"
        },
        "memory_usage": {
          "measure": "peak_memory",
          "expected": "<100MB"
        }
      }
    }
  ],
  "validation_rules": {
    "cold_start": {
      "all_elements_indexed": true,
      "embeddings_created": true,
      "cache_persisted": true,
      "sqlite_cache_exists": true
    },
    "warm_start": {
      "cache_loaded": true,
      "no_re_embedding": true,
      "dom_hash_match": true
    }
  }
}