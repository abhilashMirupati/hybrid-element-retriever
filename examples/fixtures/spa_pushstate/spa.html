<!DOCTYPE html>
<html>
<head>
    <title>SPA with PushState</title>
    <style>
        .page { display: none; padding: 20px; }
        .page.active { display: block; }
        nav { background: #333; padding: 10px; }
        nav a { color: white; margin: 0 10px; cursor: pointer; }
    </style>
</head>
<body>
    <nav>
        <a onclick="navigate('/')">Home</a>
        <a onclick="navigate('/about')">About</a>
        <a onclick="navigate('/products')">Products</a>
        <a onclick="navigate('/contact')">Contact</a>
    </nav>
    
    <div id="home" class="page active">
        <h1>Home Page</h1>
        <p>Welcome to our SPA</p>
        <button id="home-action">Home Action</button>
    </div>
    
    <div id="about" class="page">
        <h1>About Page</h1>
        <p>About our company</p>
        <button id="about-action">Learn More</button>
    </div>
    
    <div id="products" class="page">
        <h1>Products Page</h1>
        <div class="product-list">
            <div class="product">Product 1</div>
            <div class="product">Product 2</div>
        </div>
        <button id="add-to-cart">Add to Cart</button>
    </div>
    
    <div id="contact" class="page">
        <h1>Contact Page</h1>
        <form>
            <input type="email" id="contact-email" placeholder="Your email">
            <textarea id="message" placeholder="Your message"></textarea>
            <button type="submit">Send Message</button>
        </form>
    </div>
    
    <script>
        // SPA Navigation
        function navigate(path) {
            // Update URL without reload
            window.history.pushState({page: path}, '', path);
            
            // Update view
            updateView(path);
            
            // Dispatch custom event
            window.dispatchEvent(new CustomEvent('spa-navigate', {detail: {path: path}}));
        }
        
        function updateView(path) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            
            // Show target page
            const pageMap = {
                '/': 'home',
                '/about': 'about',
                '/products': 'products',
                '/contact': 'contact'
            };
            
            const pageId = pageMap[path] || 'home';
            document.getElementById(pageId).classList.add('active');
        }
        
        // Handle browser back/forward
        window.addEventListener('popstate', function(e) {
            const path = e.state ? e.state.page : '/';
            updateView(path);
        });
        
        // Handle hash changes
        window.addEventListener('hashchange', function(e) {
            console.log('Hash changed:', window.location.hash);
        });
    </script>
</body>
</html>